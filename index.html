<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>C. M. Conlan Contractors & Builders | Custom Home Builder in Montgomery County, MD</title>
  <meta name="description" content="Award-winning custom home builder and general contractor in Montgomery County, Maryland with over 35 years of experience in residential construction and renovations." />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <!-- Leaflet CSS for Interactive Map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

  <style>
    :root {
      --primary-dark: #1a2332;
      --primary-navy: #2c4056;
      --accent-gold: #c19a5b;
      --accent-warm: #8b7355;
      --text-dark: #2d2d2d;
      --text-light: #666666;
      --bg-cream: #f8f6f3;
      --bg-white: #ffffff;
      --border-light: #e5e5e5;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Montserrat", sans-serif;
      color: var(--text-dark);
      line-height: 1.7;
      overflow-x: hidden;
    }

    h1, h2, h3, h4, h5, h6 {
      font-family: "Cormorant Garamond", serif;
      font-weight: 600;
      line-height: 1.2;
      color: var(--primary-dark);
    }

    /* Header Navigation */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: var(--bg-white);
      box-shadow: 0 2px 20px rgba(0, 0, 0, 0.08);
      z-index: 1000;
      transition: all 0.3s ease;
    }

    .header.scrolled {
      box-shadow: 0 2px 30px rgba(0, 0, 0, 0.12);
    }

    .nav-container {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.2rem 4rem;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 1rem;
      font-family: "Cormorant Garamond", serif;
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--primary-dark);
      text-decoration: none;
      letter-spacing: 0.5px;
    }

    .logo-image {
      height: 50px;
      width: auto;
    }

    .nav-menu {
      display: flex;
      list-style: none;
      gap: 2.5rem;
      align-items: center;
    }

    .nav-menu a {
      color: var(--text-dark);
      text-decoration: none;
      font-size: 0.95rem;
      font-weight: 500;
      letter-spacing: 0.3px;
      transition: color 0.3s ease;
      position: relative;
    }

    .nav-menu a:hover {
      color: var(--accent-gold);
    }

    .nav-menu a::after {
      content: "";
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--accent-gold);
      transition: width 0.3s ease;
    }

    .nav-menu a:hover::after {
      width: 100%;
    }

    .dropdown {
      position: relative;
    }

    .dropdown-content {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background: white;
      min-width: 220px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
      padding: 1rem 0;
      margin-top: 1rem;
      border-radius: 4px;
    }

    .dropdown:hover .dropdown-content {
      display: block;
    }

    .dropdown-content a {
      display: block;
      padding: 0.8rem 1.5rem;
      font-size: 0.9rem;
    }

    .dropdown-content a::after {
      display: none;
    }

    .dropdown-content a:hover {
      background: var(--bg-cream);
    }

    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      font-size: 1.8rem;
      cursor: pointer;
      color: var(--primary-dark);
    }

    /* Hero Section (slideshow background) */
    .hero {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: white;
      position: relative;
      margin-top: 80px;
      overflow: hidden;
    }

    /* Two stacked background layers for crossfade */
    .hero-bg {
      position: absolute;
      inset: 0;
      background-size: cover;
      background-position: center;
      transform: scale(1.03);
      transition: opacity 1.2s ease-in-out;
      z-index: 0;
      opacity: 0;
      pointer-events: none;
      cursor: pointer;
    }
    
    .hero-bg.active {
      pointer-events: auto;
    }

    /* Overlay to keep text readable */
    .hero-bg::after {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(26, 35, 50, 0.5);
    }

    .hero-content {
      max-width: 900px;
      padding: 2rem;
      animation: fadeInUp 1s ease-out;
      position: relative;
      z-index: 1;
    }

    .hero h1 {
      font-size: 4.5rem;
      color: white;
      margin-bottom: 1.5rem;
      font-weight: 400;
      letter-spacing: 1px;
    }

    .hero-subtitle {
      font-size: 1.4rem;
      margin-bottom: 2.5rem;
      font-weight: 300;
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .btn {
      display: inline-block;
      padding: 1rem 2.5rem;
      background: var(--accent-gold);
      color: white;
      text-decoration: none;
      font-weight: 500;
      letter-spacing: 1px;
      transition: all 0.3s ease;
      border: 2px solid var(--accent-gold);
      text-transform: uppercase;
      font-size: 0.9rem;
    }

    .btn:hover {
      background: transparent;
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(193, 154, 91, 0.3);
    }

    .btn-outline {
      background: transparent;
      border: 2px solid white;
      margin-left: 1rem;
    }

    .btn-outline:hover {
      background: white;
      color: var(--primary-dark);
    }

    /* Introduction Section */
    .intro-section {
      padding: 8rem 4rem;
      background: var(--bg-white);
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .two-column {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 5rem;
      align-items: start; /* aligns image top with heading */
    }

    .intro-image {
      width: 100%;
      height: 600px;
      object-fit: cover;
      box-shadow: 20px 20px 0 var(--accent-gold);
    }

    .intro-content h2 {
      font-size: 3.5rem;
      margin-bottom: 2rem;
      line-height: 1.1;
      margin-top: 0;
    }

    .intro-content p {
      font-size: 1.1rem;
      color: var(--text-light);
      margin-bottom: 1.5rem;
      line-height: 1.8;
    }

    /* Testimonials Section */
    .testimonials-section {
      padding: 8rem 4rem;
      background: var(--bg-cream);
    }

    .section-title {
      text-align: center;
      font-size: 3.5rem;
      margin-bottom: 4rem;
    }

    .testimonials-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 3rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .testimonial-card {
      background: white;
      padding: 3rem;
      border-left: 4px solid var(--accent-gold);
      box-shadow: 0 5px 30px rgba(0, 0, 0, 0.08);
      transition: transform 0.3s ease;
    }

    .testimonial-card:hover {
      transform: translateY(-5px);
    }

    .testimonial-text {
      font-size: 1.05rem;
      line-height: 1.8;
      color: var(--text-light);
      margin-bottom: 2rem;
      font-style: italic;
    }

    .testimonial-author {
      font-weight: 600;
      color: var(--primary-dark);
      font-size: 1.1rem;
    }

    /* Gallery Preview Section */
    .gallery-section {
      padding: 8rem 4rem;
      background: var(--bg-white);
    }

    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
      max-width: 1400px;
      margin: 3rem auto 0;
    }

    .gallery-item {
      position: relative;
      overflow: hidden;
      height: 400px;
      cursor: pointer;
    }

    .gallery-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .gallery-item:hover img {
      transform: scale(1.1);
    }

    .gallery-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(26, 35, 50, 0.9));
      padding: 2rem;
      color: white;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    .gallery-item:hover .gallery-overlay {
      transform: translateY(0);
    }

    /* Map Section */
    .map-section {
      padding: 8rem 4rem;
      background: var(--bg-cream);
    }

    .map-container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .map-intro {
      text-align: center;
      margin-bottom: 3rem;
    }

    .map-intro p {
      font-size: 1.1rem;
      color: var(--text-light);
      max-width: 700px;
      margin: 1rem auto 0;
    }

    #map {
      height: 600px;
      border-radius: 8px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
    }

    /* Footer */
    .footer {
      background: var(--primary-dark);
      color: white;
      padding: 4rem 4rem 2rem;
    }

    .footer-content {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 4rem;
      max-width: 1400px;
      margin: 0 auto 3rem;
    }

    .footer h3 {
      color: var(--accent-gold);
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
    }

    .footer p, .footer a {
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      line-height: 2;
    }

    .footer a:hover {
      color: var(--accent-gold);
    }

    .social-icons {
      display: flex;
      gap: 1.5rem;
      margin-top: 1rem;
    }

    .social-icons a {
      width: 40px;
      height: 40px;
      background: rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .social-icons a:hover {
      background: var(--accent-gold);
      transform: translateY(-3px);
    }

    .footer-bottom {
      text-align: center;
      padding-top: 2rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.6);
    }

    /* Animations */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
      .nav-container { padding: 1rem 2rem; }
      .gallery-grid { grid-template-columns: repeat(2, 1fr); }
    }

    @media (max-width: 768px) {
      .mobile-menu-btn { display: block; }

      .nav-menu {
        position: fixed;
        top: 80px;
        left: -100%;
        width: 100%;
        height: calc(100vh - 80px);
        background: white;
        flex-direction: column;
        padding: 2rem;
        transition: left 0.3s ease;
        align-items: flex-start;
      }

      .nav-menu.active { left: 0; }

      .hero h1 { font-size: 2.5rem; }
      .hero-subtitle { font-size: 1rem; }

      .two-column {
        grid-template-columns: 1fr;
        gap: 3rem;
      }

      .intro-image { height: 400px; }
      .intro-content h2 { font-size: 2.5rem; }

      .testimonials-grid { grid-template-columns: 1fr; }
      .gallery-grid { grid-template-columns: 1fr; }

      #map { height: 400px; }

      .footer-content {
        grid-template-columns: 1fr;
        gap: 2rem;
      }

      .btn-outline {
        margin-left: 0;
        margin-top: 1rem;
      }
    }
  </style>
</head>
<body>
  <!-- Header Navigation -->
  <header class="header">
    <div class="nav-container">
      <a href="#" class="logo">
        <img src="conlan-logo.png" alt="C. M. Conlan Logo" class="logo-image" />
        <span>C. M. Conlan Contractors &amp; Builders</span>
      </a>
      <button class="mobile-menu-btn" onclick="toggleMenu()">â˜°</button>
      <nav>
        <ul class="nav-menu" id="navMenu">
          <li><a href="#home">Home</a></li>
          <li><a href="#gallery">Photo Gallery</a></li>
          <li><a href="#portfolio">Available Homes</a></li>
          <li class="dropdown">
            <a href="#about">About</a>
            <div class="dropdown-content">
              <a href="#awards">Awards</a>
              <a href="#certifications">Licenses &amp; Certifications</a>
              <a href="#testimonials">Our Clients</a>
            </div>
          </li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero" id="home">
    <div class="hero-bg hero-bg-a"></div>
    <div class="hero-bg hero-bg-b"></div>

    <div class="hero-content">
      <h1>Building and Renovating Fine Homes</h1>
      <p class="hero-subtitle">Expert Craftsmanship, Built to Last</p>
      <p style="font-size: 1.1rem; margin-bottom: 2rem; font-weight: 300;">In Montgomery County, MD and the Greater Washington, D.C. Area</p>
      <a href="#about" class="btn">About Us</a>
      <a href="#gallery" class="btn btn-outline">View Our Work</a>
    </div>
  </section>

  <!-- Introduction Section -->
  <section class="intro-section" id="about">
    <div class="container">
      <div class="two-column">
        <img src="chris-conlan-headshot.png" alt="Chris Conlan - Award-Winning Custom Home Builder" class="intro-image" />
        <div class="intro-content">
          <h2>Meet Chris Conlan</h2>
          <p><strong>C. M. Conlan Contractors and Builders</strong> is a Bethesda-based firm well-known for its expertise in custom home construction and renovations throughout Montgomery County, Marylandâ€”including Chevy Chase, Potomac, Rockville, and surrounding areas.</p>
          <p>Founded in 1989 by Chris Conlan, our company has developed a reputation for expert craftsmanship, close attention to detail, and exceptional strength in design. With over 35 years of experience as a residential home builder and a background in real estate, Chris is an award-winning builder recognized by the Montgomery County Builder's Association and has been featured in Bethesda Magazine as one of the area's top builders.</p>
          <p>We specialize in creating custom homes tailored to each family's specific needsâ€”whether on a lot we help you find, a lot you currently own, or one of our available lots. We also offer expert renovations and additions for homeowners looking to upgrade. At C. M. Conlan, we believe in developing strong relationships between builder and client. You can depend on Chris to work closely with you throughout the entire process, remaining active and accessible from start to finish.</p>
          <p>Our company is also a proud supporter of <strong>Rebuilding Together Montgomery County</strong>, a local nonprofit that provides renovations and housing support for underprivileged families. Chris has served as an active board member, led multiple home renovation projects, and participated in the RTMC Playhouse Projectâ€”giving the gift of home to those in need.</p>
          <a href="#portfolio" class="btn" style="margin-top: 1rem;">Browse Our Projects</a>
        </div>
      </div>
    </div>
  </section>

  

<!-- Gallery Preview Section -->
  <section class="gallery-section" id="gallery">
    <div class="container">
      <h2 class="section-title">Our Recent Work</h2>
      <div class="gallery-grid">
        <div class="gallery-item">
          <img src="home_1.jpg" alt="Modern Custom Home" />
          <div class="gallery-overlay">
            <h3>Modern Custom Home</h3>
            <p>Montgomery County, MD</p>
          </div>
        </div>
        <div class="gallery-item">
          <img src="home_2.jpg" alt="Elegant Custom Home" />
          <div class="gallery-overlay">
            <h3>Elegant Custom Home</h3>
            <p>Bethesda, MD</p>
          </div>
        </div>
        <div class="gallery-item">
          <img src="home_3.jpg" alt="Coastal Style Home" />
          <div class="gallery-overlay">
            <h3>Coastal Style Home</h3>
            <p>Montgomery County, MD</p>
          </div>
        </div>
        <div class="gallery-item">
          <img src="home_4.jpg" alt="Craftsman Style Home" />
          <div class="gallery-overlay">
            <h3>Craftsman Style Home</h3>
            <p>Chevy Chase, MD</p>
          </div>
        </div>
        <div class="gallery-item">
          <img src="home_5.jpg" alt="Traditional Custom Home" />
          <div class="gallery-overlay">
            <h3>Traditional Custom Home</h3>
            <p>Potomac, MD</p>
          </div>
        </div>
        <div class="gallery-item">
          <img src="home_7.jpg" alt="Luxury Custom Home" />
          <div class="gallery-overlay">
            <h3>Luxury Custom Home</h3>
            <p>Rockville, MD</p>
          </div>
        </div>
</div>

      <div style="text-align: center; margin-top: 3rem;">
        <a href="#portfolio" class="btn">View Full Gallery</a>
      </div>
    </div>
  </section>

<!-- Service Area Map Section -->
  <section class="map-section" id="service-area">
    <div class="map-container">
      <div class="map-intro">
        <h2 class="section-title">Our Footprint</h2>
        <p>Explore our footprint across Montgomery County, Maryland. Each pin represents a custom home we've built with pride.</p>
      </div>

      <div id="map"></div>
    </div>
  </section>

<!-- Testimonials Section -->
  <section class="testimonials-section" id="testimonials">
    <div class="container">
      <h2 class="section-title">What Our Clients Say</h2>
      <div class="testimonials-grid">
        <div class="testimonial-card">
          <p class="testimonial-text">"As a home builder myself, I appreciated the high quality and terrific service we received when Chris and his team built our custom home. They made it easy for us, from helping to design what we wanted to the final turnover. Everyone had a positive can-do attitude and was good to work with."</p>
          <p class="testimonial-author">â€” Terry Eakin</p>
        </div>
        <div class="testimonial-card">
          <p class="testimonial-text">"Chris's personal attention, focus on detail, customer orientation, high quality standards, and creativity in solving tough issues are unmatched. I can't imagine building a house with anyone else. Highly recommended!"</p>
          <p class="testimonial-author">â€” Harris Family</p>
        </div>
        <div class="testimonial-card">
          <p class="testimonial-text">"We bought our beautiful new home from C. M. Conlan and it still wows us years later. Every system has worked perfectly, and I am not easy to please. The craftsmanship is honestly perfection."</p>
          <p class="testimonial-author">â€” The Jacobs</p>
        </div>
      </div>
    </div>
  </section>



  <!-- Footer -->
  <footer class="footer" id="contact">
    <div class="container">
      <div class="footer-content">
        <div>
          <h3>C. M. Conlan Contractors &amp; Builders</h3>
          <p>Building exceptional homes and lasting relationships in Montgomery County since 1989</p>
          <p style="margin-top: 2rem;">Â© 2026 C. M. Conlan Contractors &amp; Builders<br />All Rights Reserved</p>
        </div>

        <div>
          <h3>Contact Us</h3>
          <p>Bethesda, Maryland</p>
          <p>Office: 301-983-1301</p>
          <p>Fax: 301-983-2544</p>
          <p>Email: <a href="/cdn-cgi/l/email-protection#aac9c2d8c3d9eac9c7c9c5c4c6cbc484c9c5c7"><span class="__cf_email__" data-cfemail="d9bab1abb0aa99bab4bab6b7b5b8b7f7bab6b4">[email&#160;protected]</span></a></p>
        </div>

        <div>
          <h3>Connect With Us</h3>
          <div class="social-icons">
            <a href="#" aria-label="Facebook">f</a>
            <a href="#" aria-label="Instagram">ðŸ“·</a>
            <a href="#" aria-label="LinkedIn">in</a>
            <a href="#" aria-label="Houzz">H</a>
          </div>
          <p style="margin-top: 2rem;"><a href="#awards">Awards &amp; Certifications</a></p>
          <p><a href="#testimonials">Client Testimonials</a></p>
        </div>
      </div>

      <div class="footer-bottom">
        <p>Proudly serving all of Montgomery County, Maryland</p>
      </div>
    </div>
  </footer>

  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
    // Smooth scrolling
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute("href"));
        if (target) {
          target.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      });
    });

    // Header scroll effect
    window.addEventListener("scroll", () => {
      const header = document.querySelector(".header");
      if (window.scrollY > 50) header.classList.add("scrolled");
      else header.classList.remove("scrolled");
    });

    // Mobile menu toggle
    function toggleMenu() {
      const navMenu = document.getElementById("navMenu");
      navMenu.classList.toggle("active");
    }

    // Hero slideshow - Load sold homes dynamically
    let soldHomes = [];
    let heroIndex = 0;
    let showingA = true;
    const bgA = document.querySelector(".hero-bg-a");
    const bgB = document.querySelector(".hero-bg-b");

    async function loadSlideshowHomes() {
      try {
        const response = await fetch('/api/get-homes');
        if (response.ok) {
          const data = await response.json();
          // Filter to only include sold homes that are marked for slideshow
          soldHomes = (data.items || []).filter(h => 
            h.status === 'Sold' && h.includeInSlideshow !== false
          );
        }
      } catch (error) {
        console.error('Error loading homes for slideshow:', error);
      }

      // Fallback to static images if no sold homes
      if (soldHomes.length === 0) {
        soldHomes = [
          { id: 'static1', primaryImage: 'home_1.jpg', headline: 'Custom Home' },
          { id: 'static2', primaryImage: 'home_2.jpg', headline: 'Custom Home' },
          { id: 'static3', primaryImage: 'home_3.jpg', headline: 'Custom Home' },
          { id: 'static4', primaryImage: 'home_4.jpg', headline: 'Custom Home' },
          { id: 'static5', primaryImage: 'home_5.jpg', headline: 'Custom Home' },
          { id: 'static6', primaryImage: 'home_6.jpg', headline: 'Custom Home' }
        ];
      }

      if (soldHomes.length > 0) {
        // Initialize first frame
        bgA.style.backgroundImage = `url('${soldHomes[0].primaryImage}')`;
        bgA.style.opacity = "1";
        bgA.classList.add('active');
        
        // Set click handler for first home
        const firstHome = soldHomes[0];
        const firstLink = firstHome.id.startsWith('static') ? '#gallery' : `home-details.html?id=${firstHome.id}`;
        bgA.onclick = () => window.location.href = firstLink;

        // Preload images
        soldHomes.forEach(home => { 
          const img = new Image(); 
          img.src = home.primaryImage; 
        });

        // Start slideshow
        setInterval(() => {
          heroIndex = (heroIndex + 1) % soldHomes.length;
          const currentHome = soldHomes[heroIndex];
          const nextUrl = `url('${currentHome.primaryImage}')`;
          const link = currentHome.id.startsWith('static') ? '#gallery' : `home-details.html?id=${currentHome.id}`;

          if (showingA) {
            bgB.style.backgroundImage = nextUrl;
            bgB.style.opacity = "1";
            bgB.classList.add('active');
            bgB.onclick = () => window.location.href = link;
            bgA.style.opacity = "0";
            bgA.classList.remove('active');
          } else {
            bgA.style.backgroundImage = nextUrl;
            bgA.style.opacity = "1";
            bgA.classList.add('active');
            bgA.onclick = () => window.location.href = link;
                   bgB.style.opacity = "0";
            bgB.classList.remove('active');
          }

          showingA = !showingA;
        }, 6000);
      }
    }

    loadHomesForSlideshow();
  </script>

  <!-- Leaflet JavaScript -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  
  <!-- Map Initialization -->
  <script>
    async function initMap() {
      try {
        // Fetch sold homes data
        const res = await fetch("/api/get-homes", { cache: "no-store" });
        const data = await res.json();
        const soldHomes = (data.items || []).filter(h => h.status === 'Sold' && h.lat && h.lon);

        if (soldHomes.length === 0) {
          console.log('No sold homes with coordinates found');
          return;
        }

        // Initialize map centered on Montgomery County, MD
        const map = L.map('map').setView([39.1434, -77.2014], 11);

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
          maxZoom: 19
        }).addTo(map);

        // Add custom markers for each sold home
        soldHomes.forEach(home => {
          const marker = L.marker([home.lat, home.lon]).addTo(map);
          
          // Create popup content
          const popupContent = `
            <div style="text-align: center; min-width: 200px;">
              <img src="${home.primaryImage}" alt="${home.headline}" 
                   style="width: 100%; max-width: 200px; height: 120px; object-fit: cover; margin-bottom: 8px; border-radius: 4px;" />
              <h4 style="margin: 0 0 4px; font-size: 14px;">${home.headline}</h4>
              <p style="margin: 0 0 8px; font-size: 12px; color: #666;">${home.street || ''}</p>
              <a href="home-details.html?id=${home.id}" 
                 style="display: inline-block; padding: 6px 12px; background: #c19a5b; color: white; text-decoration: none; border-radius: 4px; font-size: 12px;">
                View Details
              </a>
            </div>
          `;
          
          marker.bindPopup(popupContent);
        });

      } catch (error) {
        console.error('Error loading map:', error);
      }
    }

    // Initialize map when DOM is ready
    if (document.getElementById('map')) {
      initMap();
    }
  </script>
</body>
</html>
